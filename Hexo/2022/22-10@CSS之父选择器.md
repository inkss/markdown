---
title: '父选择器 :has() 伪类'
seo_title: '父选择器 :has() 伪类'
showPostHeadimg: true
toc: false
indent: true
tag:
  - CSS
categories: 前端
description: 'CSS :has() 伪类它来了！开发人员终于能在不依靠 JavaScript 的情况下定位父元素了！'
date: '2022-10-23 22:00'
updated: '2022-10-24 12:00'
headimg: ../../img/article/22-10@CSS之父选择器/cover.png
references:
  - title: 'MDN :has'
    url: 'https://developer.mozilla.org/zh-CN/docs/Web/CSS/:has'
  - title: Can I use
    url: 'https://caniuse.com/?search=%3Ahas'
abbrlink: 1f14d681
copyright:
  type: type5
---

一般的，我们在选取子元素时可以使用 `a>img` 这样的选择器，而反过来如果需要选择拥有图片的 `a` 元素，就只能通过 JavaScript 来实现了，不过现在就可以使用 has 选择器来实现这个需求。

准确的说，这个选择器很早就被提出，但是由于性能问题一直未曾实现，直到 22 年中旬才真正可以在浏览器使用，目前最新的 Chrome 和 Safari 均已默认支持，Firefox 开启实验支持后也能够使用，原则上已经可以稍稍使用一下了，当然生产环境的话估计还需要一两年才能无痛使用。

![浏览器兼容性](../../img/article/22-10@CSS之父选择器/image-20221023214341753.png)

根据定义，给定的选择器参数相对于该元素（`:scope`）至少匹配一个元素，MDN 上的示例：匹配其后紧跟着 `<p>` 元素的 `<h1>` 元素：

```css 相当于有个 :scope 而非是 h1:has(h1 + p)
h1:has(+ p) {
    //...
}
```

选择器参数可以使用所有的 CSS 选择符，在多个选择器时，组内是或的关系，例如 `h3:has(a, img)` 匹配的是有 `a` 标签或者 `img` 标签的 `h3` 元素。同时 `:has()` 伪类还可以和 `:checked`, `:enabled` 等混用，比如：

```css 当 .switch-input 被选择后更改 body 的背景色
body:has(.switch-input:checked) {
  background-color: #000;
}
```

总而言之，`:has()` 能够用到的场景非常多，不过由于是最近被支持的新特性，也只能在个人环境下使用一二了，经典的拿来写样式去除页面不喜欢的元素，比如哔哩哔哩的个人动态页面，我希望屏蔽所有的除视频外的动态（一般是 UP 主推的广告）：

 ```css
 /* 屏蔽除了投稿视频外的任何内容 */
 .bili-dyn-list__item:not(:has(a.bili-dyn-card-video)) {
   display: none
 }
 ```

