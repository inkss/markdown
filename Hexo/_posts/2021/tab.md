---
title: 记一次 Angular 下对 Tab 页与路由联动的处理
toc: true
tag:
  - Angular
  - NG-ZORRO
categories: 前端
description: >-
  Angular 下 Tab 页与路由联动后，在处理父子页面上出现了很多问题，由于 Tab 页是与地址 Url
  直接匹配的，所以如果在父页面中进行诸如查看详情之类的操作时，子页就只有两个处理方式：一是顶替覆盖当前父页面所对应的 Tab 页，另一则是独立新建一个 Tab 页，但是无论何种处理方式，都有不小的缺陷。
date: '2021-02-04 17:46'
updated: '2021-02-04 17:46'
abbrlink: dfbd179
---

&ensp;&emsp;Angular 下 Tab 页与路由联动后，在处理父子页面上出现了很多问题，由于 Tab 页是与地址 Url 直接匹配的，所以如果在父页面中进行诸如查看详情之类的操作时，子页就只有两个处理方式：一是顶替覆盖当前父页面所对应的 Tab 页，另一则是独立新建一个 Tab 页 *（限于最初设计遗留的缘故，无法使用子路由处理）*，但是无论何种处理方式，都有不小的缺陷。

&ensp;&emsp;倘若是使用 **覆盖顶替父页面**，那么一是从内容到地址上的顶替（Tab 页），另一是只修改父 Tab 的标题，然后覆盖掉内容。*第一种方式* 就相当于删除了父页面后新建一个子页面，所以问题就产生了：当子页面需要返回到主页面时，便需要关闭子页面重新打开父页面，但是也存在着在子页面未返回前，又从导航栏重新打开了父页面，那么此时就得处理这两个父页面的情况。并且使用 Tab 页的一个主要原因是为了页面复用，所以从复用的角度来说这两个主页面是不同状态的。而 *第二种方式* 只修改 Tab 页标题，那么对于复用，当前 Tab 页虽然内容上显示的是子页面内容，但是在路径是记录的是父页面（同时页面复用时也是取父页面快照），这就导致了在进行 Tab 页切换时，子页面内容丢失。

&ensp;&emsp;如果使用 **父页面不动，新开子页面**，这里就需要确认子页面是否允许打开多次，因为不同的子页面可能存在不同的父页面状态，但是父页面快照又只能记录一次，所以最理想的便是子页面最多只能打开一个。

------

*未完待续*
