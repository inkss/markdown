---
title: 极空间获取 SSH 权限
toc: true
indent: true
tag:
  - 极空间
  - SSH 权限
  - 1Panel 面板
categories: 文档
date: '2024-03-29 21:50'
updated: '2024-03-29 21:50'
hidden: false
description: >-
  本文介绍极空间获取 SSH 权限的方法，包括官方开启途径（设置中的远程协助选项）及相关限制，还涵盖安装 1Panel 面板的注意事项，以及获得权限后的使用教程（如修改登录页跳转逻辑、样式修饰、镜像同步、云端备份、调整极影视排序等）。
headimg: ../../img/article/24-03@极空间获取SSH权限/Hexo博客封面.png
abbrlink: ed9642cd
link: '/post/3af25609/'
---

本文介绍极空间获取 SSH 权限的方法，包括官方开启途径（设置中的远程协助选项）及相关限制，还涵盖安装 1Panel 面板的注意事项，以及获得权限后的使用教程（如修改登录页跳转逻辑、样式修饰、镜像同步、云端备份、调整极影视排序等）。

## **SSH 获取**

可以参考该[视频](https://www.bilibili.com/video/BV1SF4m1u7j2/)完成操作，视频中前半段着墨于 Ubuntu 镜像的制作，在制作完后关闭极空间，插 U 盘开机启动。在修改文件方面，UP 主采用了修改 `/etc/shadow`, `/etc/passwd` 文件的方法，手动添加了一个已知密码的新用户。除此之外，还可以采用对 root 用户添加公钥的方式 `/root/.ssh/authorized_keys`，两种方法都可行，具体取决于个人喜好。

完成修改并重启后，不出意外，您就可以在终端下登录系统了。  

## **SSH 维护**

一般情形下，极空间系统更新时会重置关键目录，无论是后加的新用户还是公钥文件均会被清空，导致失去 SSH 访问权，这里提供一个相对讨巧的方案。

首先，将极空间应用目录软链接到你的存储区：

```bash
ln -s /zspace/applications/services /tmp/zfsv3/nvme12/XXXXXXXXXXX/data/应用程序/System-link/
```

- */zspace/applications/services*：该目录为极空间应用所在目录；
- */tmp/zfsv3/nvme12/...*：该目录为**个人硬盘**的实际挂载目录，可利用`df`命令查找挂载地址；

软链的目录在极空间 APP 查看会提示**没有权限**，但可以利用 SMB 查看到这些文件。接着我们只需要随便找一个能被极空间调用的 Shell 脚本，在脚本中追加一些私货，就能搭个顺风车利用极空间实现我们的目标啦，这里推荐修改 SMB 的启动脚本：

```bash
/zspace/applications/services/samba/start.sh
```

在该文件中追加导入公钥的命令：

```sh
mkdir /root/.ssh
touch /root/.ssh/authorized_keys
echo '你的公钥' > /root/.ssh/authorized_keys
chmod 700 /root/.ssh
chmod 600 /root/.ssh/authorized_keys
```

最后在极空间 **设置** - **文件及共享服务** 开关一次 Samba 服务就搞定啦~

------

{% p center logo h2, 其余内容已迁移，请点击下方链接查看。 %}
